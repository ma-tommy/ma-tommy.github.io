<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="//cdn.kaizenplatform.net/s/fa/2bcc61161624aa.js?kz_namespace=kzs" charset="utf-8"></script>
</head>
<body>
    <h1>indexD</h1>
    <div id="index-d-div" style="margin: 10px;">
       test
    </div>
    <a href="https://ma-tommy.github.io" style="margin: 10px;">google</a><br>
    <input id="index-d-success" type="submit" value="success" style="margin: 10px;background-color: pink; border-radius: 39px;"></input>
    <input id="index-d-faild" type="submit" value="faild" style="margin: 10px;background-color: pink; border-radius: 39px;"></input>
    <div id="response">

    </div>
    <script>
        var doResolveAPI = "https://storage.googleapis.com/kaizen-cse-public/cse-examples/xhr-and-dom-append/plain-js/kaizen-web-api/places.json?20200910";
        var doRejectAPI = "https://storage.googleapis.com/kaizen-cse-public/cse-examples/xhr-and-dom-append/plain-js/kaizen-web-api/places-fail.json?20200910";
        var callURL = [doResolveAPI, doRejectAPI];
        var callAPI = (url) => {
            return new Promise ((resolve, reject) => {
                $.get(url,(data) => {
                    console.log("api response = " + JSON.stringify(data));
                    if (data.success == true) {
                        resolve(data);
                    } else {
                        reject();
                    }
                }, "json");
            })
        }
    
        var exec = (num) => {
            callAPI(callURL[num]).then((res) => {
                $("#response").text(JSON.stringify(res));
            }).catch(() => {
                $("#response").text("");
                return;
            })
        }

        $("#index-d-success").on("click", () => {
            exec(0);
        });

        $("#index-d-faild").on("click", () => {
            exec(1);
        });
    </script>  
</body>
  </html>